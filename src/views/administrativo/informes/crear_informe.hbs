<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Mantenimiento</title>
  <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            margin: 0;
            padding: 0;
        }
        .report-container {
            width: 100%;
            max-width: 800px; /* Ancho máximo para mantener consistencia */
            margin: 0 auto;
            border: 1px solid #000;
            padding: 10px;
        }
        .company-info {
            text-align: center;
            font-size: 12px;
            margin-bottom: 10px;
        }
        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }
        .logo {
            width: 120px;
        }
        .info-section {
            font-size: 10px;
            line-height: 1.5;
            text-align: left;
        }
        .info-section div {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
        }
        .info-section strong {
            min-width: 100px; /* Ancho mínimo para las etiquetas */
        }
        .info-section input {
            width: 150px;
            font-size: 10px;
            margin-left: 5px;
            padding: 2px;
            border: 1px solid #ccc;
        }
        .registro-container {
            text-align: center;
            margin-bottom: 10px;
        }
        .table-container {
            overflow-x: auto;
        }
        .combined-table {
            border-collapse: collapse;
            width: 100%;
            font-size: 10px;
        }
        .combined-table th, .combined-table td {
            border: 0.5px solid #000;
            padding: 1px;
            text-align: center;
        }
        .header {
            background-color: #6da8d6;
            color: white;
        }
        .input-field {
            width: 25px;
            text-align: left;
            border: none;
            background-color: #f0f0f0;
            font-size: 10px;
            margin: 0;
            padding: 0;
        }
        .hidrosistema-input {
            width: 50px;
            text-align: left;
        }
        h2 {
            font-size: 14px;
            margin: 10px 0;
        }
          /* Estilo para los indicadores de estado */
        .indicator-column div {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
        }
        .status-input {
            width: 50px;
            margin-left: 5px;
        }
           /* Estilo responsive */
        @media (max-width: 600px) {
            .header-info, .info-section {
                flex-direction: column;
                align-items: flex-start;
                width: 100%;
            }
            .info-section strong {
                min-width: auto;
            }
            .info-section input {
                max-width: 100%;
            }
            .logo {
                width: 60px;
            }
            .combined-table {
                font-size: 8px;
            }
            .input-field, .hidrosistema-input {
                width: 25px;
            }
            .status-input {
                width: 30px;
            }
            .signature-section div {
                width: 100%;
            }
        }
        #logo{
            width: 300px;
margin-left: 40%;

        }
    </style>
</head>
<body>


    <div class="report-container">
        <!-- Company information section -->
        <div class="company-info">
            <strong>INGENIERÍA HIDRAULIBOMBAS S.A.S</strong><br>
            NIT: 901.454.224-1
        </div>

        <div class="header-info">
     <div class="logo">
    <img id="logo" src="imagenes/logo_ingenieria.jpeg-removebg-preview.png" alt="Logo" width="200"> <!-- Ajusta la ruta del logo -->
</div>

<form id="maintenanceForm">
    <!-- Tu contenido de formulario aquí -->

<div class="info-section">
    <div><strong>Cliente:</strong> <input type="text" name="cliente"></div>
    <div><strong>Equipo:</strong> <input type="text" name="equipo"></div>
    <div><strong>Técnico:</strong> <input type="text" name="tecnico"></div>
    <div><strong>Hora Entrada:</strong> <input type="text" name="hora_entrada"></div>
    <div><strong>Hora Salida:</strong> <input type="text" name="hora_salida"></div>
    <div><strong>Fecha:</strong> <input type="text" name="fecha"></div>
    <div><strong>Número:</strong> <input type="text" name="numero"></div>
</div>


        </div>


        <div class="registro-container">
            <h2>Registro de Mantenimiento</h2>
        </div>

        <div class="table-container">
            <table class="combined-table">
                <thead>
                    <tr class="header">
                        <th colspan="5">TABLERO DE CONTROL</th>
                        <th colspan="2">HIDROSISTEMA</th>
                        <th colspan="5">SISTEMAEYECTOR</th>
                    </tr>
            <tr>
                <th>Parámetro</th>
                <th>B1</th>
                <th>B2</th>
                <th>B3</th>
                <th>B4</th>
                <th>Descripción</th>
                <th>Estado</th>
                <th>Parámetro</th>
                <th>B1</th>
                <th>B2</th>
                <th>B3</th>
                <th>B4</th>
            </tr>
        </thead>
        <tbody>
            <tr>
        <td>Variador</td>
<td><input type="text" class="input-field" name="variador_b1"></td>
<td><input type="text" class="input-field" name="variador_b2"></td>
<td><input type="text" class="input-field" name="variador_b3"></td>
<td><input type="text" class="input-field" name="variador_b4"></td>

              <td>Precarga</td>
<td><input type="text" class="hidrosistema-input" name="precarga"></td>

<td>Guarda motor</td>
<td><input type="text" class="input-field" name="guarda_motor_b11"></td>
<td><input type="text" class="input-field" name="guarda_motor_b22"></td>
<td><input type="text" class="input-field" name="guarda_motor_b33"></td>
<td><input type="text" class="input-field" name="guarda_motor_b44"></td>

            </tr>
<tr>
    <td>Mutelillas</td>
    <td><input type="text" class="input-field" name="mutelillas_b1"></td>
    <td><input type="text" class="input-field" name="mutelillas_b2"></td>
    <td><input type="text" class="input-field" name="mutelillas_b3"></td>
    <td><input type="text" class="input-field" name="mutelillas_b4"></td>
    <td>Flotador Mecánico</td>
    <td><input type="text" class="hidrosistema-input" name="flotador_mecanico"></td>
    <td>Breaker </td>
    <td><input type="text" class="input-field" name="breaker_b1"></td>
    <td><input type="text" class="input-field" name="breaker_b2"></td>
    <td><input type="text" class="input-field" name="breaker_b3"></td>
    <td><input type="text" class="input-field" name="breaker_b4"></td>
</tr>

<tr>
    <td>Piloto</td>
    <td><input type="text" class="input-field" name="piloto_b1"></td>
    <td><input type="text" class="input-field" name="piloto_b2"></td>
    <td><input type="text" class="input-field" name="piloto_b3"></td>
    <td><input type="text" class="input-field" name="piloto_b4"></td>
    <td>Válvulas de Succión</td>
    <td><input type="text" class="hidrosistema-input" name="valvulas_succion"></td>
    <td>Muletillas</td>
      <td><input type="text" class="input-field" name="muletillas_b1"></td>
    <td><input type="text" class="input-field" name="muletillas_b2"></td>
    <td><input type="text" class="input-field" name="muletillas_b3"></td>
    <td><input type="text" class="input-field" name="muletillas_b4"></td>
</tr>

   <tr>
    <td>Contactores</td>
    <td><input type="text" class="input-field" name="contactores_b1"></td>
    <td><input type="text" class="input-field" name="contactores_b2"></td>
    <td><input type="text" class="input-field" name="contactores_b3"></td>
    <td><input type="text" class="input-field" name="contactores_b4"></td>
    <td>Tanque Hidro</td>
    <td><input type="text" class="hidrosistema-input" name="tanque_hidro"></td>
    <td>Contacores</td>
    <td><input type="text" class="input-field" name="contacores_b1"></td>
    <td><input type="text" class="input-field" name="contacores_b2"></td>
    <td><input type="text" class="input-field" name="contacores_b3"></td>
    <td><input type="text" class="input-field" name="contacores_b4"></td>
</tr>

   <tr>
    <td>Presostatos</td>
    <td><input type="text" class="input-field" name="presostatos_b1"></td>
    <td><input type="text" class="input-field" name="presostatos_b2"></td>
    <td><input type="text" class="input-field" name="presostatos_b3"></td>
    <td><input type="text" class="input-field" name="presostatos_b4"></td>
    <td>Cheques</td>
    <td><input type="text" class="hidrosistema-input" name="cheques"></td>
    <td>Flotador Electricos</td>
    <td><input type="text" class="input-field" name="flotador_electricos_b1"></td>
    <td><input type="text" class="input-field" name="flotador_electricos_b2"></td>
    <td><input type="text" class="input-field" name="flotador_electricos_b3"></td>
    <td><input type="text" class="input-field" name="flotador_electricos_b4"></td>
</tr>

<tr>
    <td>Alternador</td>
    <td><input type="text" class="input-field" name="alternador_b1"></td>
    <td><input type="text" class="input-field" name="alternador_b2"></td>
    <td><input type="text" class="input-field" name="alternador_b3"></td>
    <td><input type="text" class="input-field" name="alternador_b4"></td>
    <td>Presion de linea</td>
    <td><input type="text" class="hidrosistema-input" name="presion_linea"></td>
    <td>Conexiones</td>
    <td><input type="text" class="input-field" name="conexiones_b11"></td>
    <td><input type="text" class="input-field" name="conexiones_b22"></td>
    <td><input type="text" class="input-field" name="conexiones_b33"></td>
    <td><input type="text" class="input-field" name="conexiones_b44"></td>
</tr>

<tr>
    <td>Guarda motor</td>
    <td><input type="text" class="input-field" name="guarda_motor_b1"></td>
    <td><input type="text" class="input-field" name="guarda_motor_b2"></td>
    <td><input type="text" class="input-field" name="guarda_motor_b3"></td>
    <td><input type="text" class="input-field" name="guarda_motor_b4"></td>
    <td>Registros</td>
    <td><input type="text" class="hidrosistema-input" name="registros"></td>
    <td>Amperaje</td>
 <td><input type="text" class="input-field" name="amperaje_b11"></td>
    <td><input type="text" class="input-field" name="amperaje_b22"></td>
    <td><input type="text" class="input-field" name="amperaje_b33"></td>
    <td><input type="text" class="input-field" name="amperaje_b44"></td>
</tr>

<tr>
    <td>Temporizador</td>
    <td><input type="text" class="input-field" name="temporizador_b1"></td>
    <td><input type="text" class="input-field" name="temporizador_b2"></td>
    <td><input type="text" class="input-field" name="temporizador_b3"></td>
    <td><input type="text" class="input-field" name="temporizador_b4"></td>
    <td>Membrana</td>
    <td><input type="text" class="hidrosistema-input" name="membrana"></td>
    <td>Voltaje</td>
   <td><input type="text" class="input-field" name="voltaje_b11"></td>
    <td><input type="text" class="input-field" name="voltaje_b22"></td>
    <td><input type="text" class="input-field" name="voltaje_b33"></td>
    <td><input type="text" class="input-field" name="voltaje_b44"></td>
</tr>

 <tr>
    <td>Rele Termico</td>
    <td><input type="text" class="input-field" name="rele_termico_b1"></td>
    <td><input type="text" class="input-field" name="rele_termico_b2"></td>
    <td><input type="text" class="input-field" name="rele_termico_b3"></td>
    <td><input type="text" class="input-field" name="rele_termico_b4"></td>
    <td>Manometro</td>
    <td><input type="text" class="hidrosistema-input" name="manometro"></td>
    <td>Sierena</td>
    <td><input type="text" class="input-field" name="sierena_b1"></td>
    <td><input type="text" class="input-field" name="sierena_b2"></td>
    <td><input type="text" class="input-field" name="sierena_b3"></td>
    <td><input type="text" class="input-field" name="sierena_b4"></td>
</tr>

       <tr>
    <td>Flotador Electrico</td>
    <td><input type="text" class="input-field" name="flotador_electrico_b1"></td>
    <td><input type="text" class="input-field" name="flotador_electrico_b2"></td>
    <td><input type="text" class="input-field" name="flotador_electrico_b3"></td>
    <td><input type="text" class="input-field" name="flotador_electrico_b4"></td>
    <td>Cargador de Aire</td>
    <td><input type="text" class="hidrosistema-input" name="cargador_aire"></td>
    <td>Rele termico</td>
    <td><input type="text" class="input-field" name="rele_terminco_b1"></td>
    <td><input type="text" class="input-field" name="rele_terminco_b2"></td>
    <td><input type="text" class="input-field" name="rele_terminco_b3"></td>
    <td><input type="text" class="input-field" name="rele_terminco_b4"></td>
</tr>

     <tr>
    <td>Conexiones</td>
    <td><input type="text" class="input-field" name="conexiones_b1"></td>
    <td><input type="text" class="input-field" name="conexiones_b2"></td>
    <td><input type="text" class="input-field" name="conexiones_b3"></td>
    <td><input type="text" class="input-field" name="conexiones_b4"></td>
    <td>Tanque Reserva</td>
    <td><input type="text" class="hidrosistema-input" name="tanque_reserva"></td>
    <td>Residuos sólidos</td>
    <td><input type="text" class="input-field" name="residuos_b1"></td>
    <td><input type="text" class="input-field" name="residuos_b2"></td>
    <td><input type="text" class="input-field" name="residuos_b3"></td>
    <td><input type="text" class="input-field" name="residuos_b4"></td>
</tr>

 <tr>
    <td>Amperaje</td>
    <td><input type="text" class="input-field" name="amperaje_b1"></td>
    <td><input type="text" class="input-field" name="amperaje_b2"></td>
    <td><input type="text" class="input-field" name="amperaje_b3"></td>
    <td><input type="text" class="input-field" name="amperaje_b4"></td>
    <td>Flauta de descarga</td>
    <td><input type="text" class="hidrosistema-input" name="flauta_descarga"></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
</tr>

  <tr>
    <td>Voltaje</td>
    <td><input type="text" class="input-field" name="voltaje_b1"></td>
    <td><input type="text" class="input-field" name="voltaje_b2"></td>
    <td><input type="text" class="input-field" name="voltaje_b3"></td>
    <td><input type="text" class="input-field" name="voltaje_b4"></td>
    <td></td>
    <td></td>
</tr>

        </tbody>
    </table>
<div class="table-container">
    <table class="combined-table">
        <thead>
            <tr class="header">
                <th colspan="5">MOTOR</th>
                <th colspan="5">BOMBAS</th>
                <th colspan="5">Indicador</th> <!-- Cambiado de rowspan a colspan -->
            </tr>
            <tr>
                <th>Parámetro</th>
                <th>M1</th>
                <th>M2</th>
                <th>M3</th>
                <th>M4</th>
                <th>Parámetro</th>
                <th>B1</th>
                <th>B2</th>
                <th>B3</th>
                <th>B4</th>
            </tr>
        </thead>
        <tbody>
            <tr>

    <td>Rodamientos</td>
    <td><input type="text" class="input-field" name="rodamientos_m1"></td>
    <td><input type="text" class="input-field" name="rodamientos_m2"></td>
    <td><input type="text" class="input-field" name="rodamientos_m3"></td>
    <td><input type="text" class="input-field" name="rodamientos_m4"></td>

     <td>Impulsor</td>
    <td><input type="text" class="input-field" name="impulsor_m1"></td>
    <td><input type="text" class="input-field" name="impulsor_m2"></td>
    <td><input type="text" class="input-field" name="impulsor_m3"></td>
    <td><input type="text" class="input-field" name="impulsor_m4"></td>
                <td rowspan="6" class="indicator-column">
                    <!-- Indicadores de estado con campos de entrada -->
                          <div>
                     <input type="text" name="cambio" placeholder=" " class="status-input" style="width: 50px;">
<span style="margin-left: 10px;">Cambio</span>

                    </div>
                    <div>
<input type="text" name="falla" placeholder="" class="status-input" style="width: 50px;">
<span style="margin-left: 10px;">Falla</span>

                    </div>
                    <div>
<input type="text" name="pendiente" placeholder=" " class="status-input" style="width: 50px;">
<span style="margin-left: 10px;">Pendiente</span>

                    </div>
                    <div>
<input type="text" name="diagnostico" placeholder="" class="status-input" style="width: 50px;">
<span style="margin-left: 10px;">Diagnóstico</span>

                    </div>
                    <div>
<input type="text" name="verificado" placeholder="" class="status-input" style="width: 50px;">
<span style="margin-left: 10px;">Verificado</span>

                    </div>
                    <div>
<input type="text" name="operando" placeholder=" " class="status-input" style="width: 50px;">
<span style="margin-left: 10px;">Operando</span>

                    </div>
                </td>
            </tr>
<tr>
    <td>Casquillo</td>
    <td><input type="text" name="casquillo_b1" class="input-field"></td>
    <td><input type="text" name="casquillo_b2" class="input-field"></td>
    <td><input type="text" name="casquillo_b3" class="input-field"></td>
    <td><input type="text" name="casquillo_b4" class="input-field"></td>
    <td>Sello Mecánico</td>
    <td><input type="text" name="sello_mecanico_b1" class="input-field"></td>
    <td><input type="text" name="sello_mecanico_b2" class="input-field"></td>
    <td><input type="text" name="sello_mecanico_b3" class="input-field"></td>
    <td><input type="text" name="sello_mecanico_b4" class="input-field"></td>
</tr>

<tr>
    <td>Empaque</td>
    <td><input type="text" name="empaque_b1" class="input-field"></td>
    <td><input type="text" name="empaque_b2" class="input-field"></td>
    <td><input type="text" name="empaque_b3" class="input-field"></td>
    <td><input type="text" name="empaque_b4" class="input-field"></td>
    <td>Empaque</td>
    <td><input type="text" name="empaque_2_b1" class="input-field"></td>
    <td><input type="text" name="empaque_2_b2" class="input-field"></td>
    <td><input type="text" name="empaque_2_b3" class="input-field"></td>
    <td><input type="text" name="empaque_2_b4" class="input-field"></td>
</tr>

<tr>
    <td>Ventilador</td>
    <td><input type="text" name="ventilador_b1" class="input-field"></td>
    <td><input type="text" name="ventilador_b2" class="input-field"></td>
    <td><input type="text" name="ventilador_b3" class="input-field"></td>
    <td><input type="text" name="ventilador_b4" class="input-field"></td>
    <td>Carcasa</td>
    <td><input type="text" name="carcasa_b1" class="input-field"></td>
    <td><input type="text" name="carcasa_b2" class="input-field"></td>
    <td><input type="text" name="carcasa_b3" class="input-field"></td>
    <td><input type="text" name="carcasa_b4" class="input-field"></td>
</tr>

<tr>
    <td>Bornes</td>
    <td><input type="text" name="bornes_b1" class="input-field"></td>
    <td><input type="text" name="bornes_b2" class="input-field"></td>
    <td><input type="text" name="bornes_b3" class="input-field"></td>
    <td><input type="text" name="bornes_b4" class="input-field"></td>
    <td>Casquillo</td>
    <td><input type="text" name="casquillo_b11" class="input-field"></td>
    <td><input type="text" name="casquillo_b22" class="input-field"></td>
    <td><input type="text" name="casquillo_b33" class="input-field"></td>
    <td><input type="text" name="casquillo_b44" class="input-field"></td>
</tr>

<tr>
    <td>Bobinado</td>
    <td><input type="text" name="bobinado_b1" class="input-field"></td>
    <td><input type="text" name="bobinado_b2" class="input-field"></td>
    <td><input type="text" name="bobinado_b3" class="input-field"></td>
    <td><input type="text" name="bobinado_b4" class="input-field"></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
</tr>

        </tbody>
    </table>
</div>
<!-- Campo de texto adicional debajo de la última tabla -->
<div class="additional-field">
    <h3>Partes para Cambio:</h3> <!-- Título similar al de la imagen -->
    <textarea name="partes_para_cambio" rows="4" style="width: 100%; font-size: 12px; border: 1px solid #000;"></textarea> <!-- Campo de texto -->
</div>

<div class="additional-field">
    <h3>Observaciones:</h3> <!-- Título para las observaciones -->
    <textarea name="observaciones" rows="4" style="width: 100%; font-size: 12px; border: 1px solid #000;"></textarea> <!-- Campo de texto -->
</div>
   <input type="submit" value="Enviar Datos">
  
<!-- Sección de firmas debajo de "Observaciones" -->
<div class="signature-section">
    <div style="display: flex; justify-content: space-between; margin-top: 20px;">
        <!-- Campo de firma del técnico -->
        <div style="text-align: center; width: 45%;">
            <canvas id="signatureCanvas1" name="firma_tecnico" width="300" height="100" style="border: 1px solid #000;"></canvas>
            <br>
            <button onclick="clearCanvas('signatureCanvas1')">Borrar</button>
            <br>
            <span>TÉCNICO</span>
        </div>
        <!-- Campo de firma del supervisor -->
        <div style="text-align: center; width: 45%;">
            <canvas id="signatureCanvas2" name="firma_supervisor" width="300" height="100" style="border: 1px solid #000;"></canvas>
            <br>
            <button onclick="clearCanvas('signatureCanvas2')">Borrar</button>
            <br>
            <span>SUPERVISOR</span>
        </div>
    </div>
</div>
  
<!-- Información de contacto debajo de las firmas -->
<div class="contact-info" style="text-align: center; margin-top: 20px; font-size: 12px; color: #0000FF;">
    Carrera 96A No. 65-52 // ingenieriahidraulibombas@gmail.com // Tels.: 6016496010 - 3115989023
</div>
<br>
 </div>
</form>
 <!-- Botón para enviar el formulario -->

<!-- Script para habilitar la firma en los canvas -->
<!-- Script para habilitar la firma en los canvas -->
<script>
    // Initialize the signature pad for a given canvas
    function initSignaturePad(canvasId) {
        const canvas = document.getElementById(canvasId);
        const ctx = canvas.getContext('2d');
        let drawing = false;

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchend', stopDrawing);
        canvas.addEventListener('touchmove', draw);

        function startDrawing(event) {
            drawing = true;
            ctx.beginPath();
            const rect = canvas.getBoundingClientRect();
            const x = (event.clientX || event.touches[0].clientX) - rect.left;
            const y = (event.clientY || event.touches[0].clientY) - rect.top;
            ctx.moveTo(x, y);
        }

        function stopDrawing() {
            drawing = false;
        }

        function draw(event) {
            if (!drawing) return;
            const rect = canvas.getBoundingClientRect();
            const x = (event.clientX || event.touches[0].clientX) - rect.left;
            const y = (event.clientY || event.touches[0].clientY) - rect.top;
            ctx.lineTo(x, y);
            ctx.stroke();
        }
    }

    // Clear the canvas
    function clearCanvas(canvasId) {
        const canvas = document.getElementById(canvasId);
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // Initialize signature pads for each canvas
    window.onload = function() {
        initSignaturePad('signatureCanvas1');
        initSignaturePad('signatureCanvas2');
    };

    // Get signature data from a canvas as a Base64 string
    function getSignatureDataUrl(canvasId) {
        const canvas = document.getElementById(canvasId);
        return canvas.toDataURL('image/png'); // Returns a Base64-encoded string
    }

    // Capture signatures as Base64-encoded images
    function getSignatureBlobs() {
        const firmaTecnico = getSignatureDataUrl('signatureCanvas1');
        const firmaSupervisor = getSignatureDataUrl('signatureCanvas2');

        return {
            firma_tecnico: firmaTecnico,
            firma_supervisor: firmaSupervisor
        };
    }

    // Handle form submission
    document.getElementById('maintenanceForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission
        submitForm(); // Call the function to submit data
    });

    // Function to submit form data
    function submitForm() {
        const formData = new FormData(document.getElementById('maintenanceForm'));
        const signatures = getSignatureBlobs();

        // Append the signatures to the form data
        formData.append('firma_tecnico', signatures.firma_tecnico);
        formData.append('firma_supervisor', signatures.firma_supervisor);

        fetch('/insertar-datos', {
            method: 'POST',
            body: formData
        })
        .then(response => response.text())
        .then(data => {
            console.log('Success:', data);
            alert('Datos insertados correctamente');
        })
        .catch((error) => {
            console.error('Error:', error);
            alert('Error al insertar los datos');
        });
    }
</script>

